local a,b,c,d={Safe=false,Connections={}},{Drawings={},Bases={},Base={}},{},{}local e,f,g,h=game:GetService("RunService"),game:GetService("Workspace"),game:GetService("Lighting"),game:GetService("Players")local i=h.LocalPlayer;local j=f.CurrentCamera;local k=i:GetMouse()local l,m,n,o=table.find,table.clear,table.insert,table.remove;local p,q,r=string.sub,string.upper,string.lower;local s,t,u,v,w,x,y,z,A,B=math.huge,math.pi,math.clamp,math.ceil,math.round,math.abs,math.floor,math.random,math.cos,math.acos;local C,D,E=Vector2.new,Vector3.new,CFrame.new;local F,G=Color3.fromRGB,Color3.fromHex;local H,I=task.spawn,task.wait;local J,K=coroutine.create,coroutine.resume;local L={Enabled=false,MaxDistance=750,FadeTime=2,TextCase="lowercase",TextLength=24,Box={false,"Corner",G("#ffffff"),G("#000000")},BoxFill={false,G("#000000"),0.2},Name={false,G("#ffffff")},HealthBar={false,G("#09ff00"),G("#000000")},HealthNumber={false},Weapon={false,G("#ffffff")},Distance={false,G("#ffffff")},Flag={false,G("#ffffff")}}do function c:Lerp(M,N,O)if M<=0 then return O end;if M>=100 then return N end;return Color3.new(O.R+(N.R-O.R)*M,O.G+(N.G-O.G)*M,O.B+(N.B-O.B)*M)end end;do function d:RoundVector(P)return C(w(P.X),w(P.Y))end;function d:Shift(Q)return B(A(Q*t))/t end;function d:Random(Q)return z(-Q,Q)end;function d:RandomVec3(R,S,T)return D(d:Random(R),d:Random(S),d:Random(T))end end;do function a:ThreadFunction(U,V,...)local U=V and function()local W,X=pcall(U)if not W and not a.Safe then warn("Sanity:\n","              "..V..":",X)end end or U;local Y=J(U)K(Y,...)return Y end;function a:Connection(Z,_)local a0=Z:Connect(_)a.Connections[#a.Connections+1]=a0;return a0 end;function a:GetBodyParts(a1,a2,a3,a4)local a5={}local a4=a4 or{"Head","Torso","Arms","Legs"}for a6,a7 in pairs(a1:GetChildren())do if a7:IsA("BasePart")and a7~=a2 then if l(a4,"Head")and a7.Name:lower():find("head")then a5[a3 and a7.Name or#a5+1]=a7 elseif l(a4,"Torso")and a7.Name:lower():find("torso")then a5[a3 and a7.Name or#a5+1]=a7 elseif l(a4,"Arms")and a7.Name:lower():find("arm")then a5[a3 and a7.Name or#a5+1]=a7 elseif l(a4,"Legs")and a7.Name:lower():find("leg")then a5[a3 and a7.Name or#a5+1]=a7 elseif l(a4,"Arms")and a7.Name:lower():find("hand")or l(a4,"Legs ")and a7.Name:lower():find("foot")then a5[a3 and a7.Name or#a5+1]=a7 end end end;return a5 end;function a:GetPlayerParent(a8)return a8.Parent end;function a:GetCharacter(a8)return a8.Character end;function a:GetHumanoid(a8,a1)return a1:FindFirstChildOfClass("Humanoid")end;function a:GetRootPart(a8,a1,a9)return a9.RootPart end;function a:GetHealth(a8,a1,a9)if a9 then return u(a9.Health,0,a9.MaxHealth),a9.MaxHealth end end;function a:ValidateClient(a8)local aa=a:GetCharacter(a8)local a9=aa and a:GetHumanoid(a8,aa)local a2=a9 and a:GetRootPart(a8,aa,a9)return aa,a9,a2 end;function a:ClientAlive(a8,a1,a9)local ab,ac=a:GetHealth(a8,a1,a9)return ab>0 end;function a:ClampString(ad,ae,af)local af=af or 2;local ag=ad:split("\n")local ah=""for a6,ai in pairs(ag)do if a6*13<=ae then ah=ah..ai..(a6==#ag and""or"\n")end end;return ah~=ad and(ah==""and""or ah:sub(0,#ah-1).." ...")or ah end end;do function b:Draw(Z,aj)local Drawing=Drawing.new(Z)for ak,M in pairs(aj)do Drawing[ak]=M end;n(b.Drawings,Drawing)return Drawing end;function b:FormatString(ad)local al=L["TextCase"]local ae=L["TextLength"]if al=="lowercase"then return r(p(ad,1,ae))elseif al=="UPPERCASE"then return q(p(ad,1,ae))else return p(ad,1,ae)end end;function b:Create(aj)if aj then if aj.Player then local am=setmetatable({Player=aj.Player,Info={Tick=tick()},Renders={Weapon=b:Draw("Text",{Text="Weapon",Visible=false,Size=13,Center=true,Color=G("#ffffff"),Outline=true,OutlineColor=G("#000000"),Font=Drawing.Fonts.Plex}),Distance=b:Draw("Text",{Text="Distance",Visible=false,Size=13,Center=true,Color=G("#ffffff"),Outline=true,OutlineColor=G("#000000"),Font=Drawing.Fonts.Plex}),HealthBarOutline=b:Draw("Square",{Thickness=1,Visible=false,Filled=true,Color=G("#000000")}),HealthBarInline=b:Draw("Square",{Thickness=1,Visible=false,Filled=true,Color=G("#09ff00")}),HealthBarValue=b:Draw("Text",{Text="100",Visible=false,Size=13,Center=true,Color=G("#09ff00"),Outline=true,OutlineColor=G("#000000"),Font=2}),BoxFill=b:Draw("Square",{Thickness=1,Visible=false,Filled=true,Color=G("#000000")}),BoxOutline=b:Draw("Square",{Thickness=2,Visible=false,Filled=false,Color=G("#000000")}),BoxInline=b:Draw("Square",{Thickness=1,Visible=false,Filled=false,Color=G("#C30B00")}),Name=b:Draw("Text",{Text="Name",Visible=false,Size=13,Center=true,Color=G("#ffffff"),Outline=true,OutlineColor=G("#000000"),Font=Drawing.Fonts.Plex}),Flag=b:Draw("Text",{Text="Flag",Visible=false,Size=13,Center=false,Color=G("#ffffff"),Outline=true,OutlineColor=G("#000000"),Font=Drawing.Fonts.Plex}),Corners={}}},{__index=b.Base})do for a6=9,16 do am.Renders.Corners[a6]=b:Draw("Line",{Thickness=3,Color=G("#000000")})end;for a6=1,8 do am.Renders.Corners[a6]=b:Draw("Line",{Thickness=0,Color=G("#1A66FF")})end end;b.Bases[aj.Player]=am;return am end end end;function b.Base:Opacity(an)local am=self;if am then local ao=rawget(am,"Renders")for a6,Drawing in pairs(ao)do if a6~="Corners"then Drawing.Visible=an end end;for a6=1,16 do am.Renders.Corners[a6].Visible=an end;if not an then am.Info.RootPosition=nil;am.Info.Health=nil;am.Info.MaxHealth=nil end end end;function b.Base:Remove()local am=self;if am then setmetatable(am,{})b.Bases[am.Player]=nil;am.Object=nil;for a6,Drawing in pairs(am.Renders)do if a6~="Corners"then Drawing:Remove()end end;for a6=1,16 do am.Renders.Corners[a6]:Remove()end;am.Renders=nil;am=nil end end;function b.Base:Update()local am=self;if am then local ao=rawget(am,"Renders")local a8=rawget(am,"Player")local ap=rawget(am,"Info")local aq=a:GetPlayerParent(a8)if a8 and aq and aq~=nil or ap.RootPosition and ap.Health and ap.MaxHealth then if L.Enabled==true then local aa,a9,a2=a:ValidateClient(a8)local ar=a2 and a:GetBodyParts(aa,a2,true)local as=1;if aa and aa.Parent and(a9 and a2 and ar)then local ab,ac=a:GetHealth(a8,aa,a9)if ab>0 then ap.Pass=true;ap.RootPosition=a2.Position;ap.Health=ab;ap.MaxHealth=ac else ap.Pass=false end else ap.Pass=false end;if ap.Pass then ap.Tick=tick()else local at=250/(L.FadeTime*100)local M=ap.Tick-tick()if M<=at then as=u((M+at)*1/at,0,1)else ap.RootPosition=nil;ap.Health=nil;ap.MaxHealth=nil end end;if ap.RootPosition and ap.Health and ap.MaxHealth then local au=j.CFrame.Position-ap.RootPosition.Magnitude;local av,aw=j:WorldToViewportPoint(ap.RootPosition)local ax,ay,az,aA,aB,aC,aD,aE;if aw then local aF=tonumber(L.MaxDistance)if au<=aF then ax=(j:WorldToViewportPoint(ap.RootPosition-D(0,3,0)).Y-j:WorldToViewportPoint(ap.RootPosition+D(0,2.6,0)).Y)/2;ay=d:RoundVector(C(y(ax*1.5),y(ax*1.9)))az=d:RoundVector(C(y(av.X-ax*1.5/2),y(av.Y-ax*1.6/2)))if L["Box"][1]==true and L["Box"][2]=="Corner"then aA=d:RoundVector(C(az.X+ay.X/2,az.Y+ay.Y/2))aB=d:RoundVector(C(aA.X-ay.X/2,aA.Y-ay.Y/2))aC=d:RoundVector(C(aA.X-ay.X/2,aA.Y+ay.Y/2))aD=d:RoundVector(C(aA.X+ay.X/2,aA.Y-ay.Y/2))aE=d:RoundVector(C(aA.X+ay.X/2,aA.Y+ay.Y/2))end end end;if ax and ay and az then local aG=(1-0.2)*as;for a6,Drawing in pairs(ao)do if a6~="Corners"then if Drawing.Visible then Drawing.Visible=false end end end;for a6=1,16 do if ao.Corners[a6].Visible then ao.Corners[a6].Visible=false end end;do if L["Name"][1]==true then local V=ao.Name;V.Text=b:FormatString(a8.Name)V.Position=C(ay.X/2+az.X,az.Y-16)V.Visible=true;V.Transparency=aG;V.Color=L["Name"][2]end end;do if L["Box"][1]==true then if L["Box"][2]=="Corner"then local aH,aI,aJ=ao.Corners,L["Box"][3],L["Box"][4]do aH[1].Visible=true;aH[1].From=aB;aH[1].To=aH[1].From+C(0,ay.X/3)aH[1].Color=aI;aH[2].Visible=true;aH[2].From=aB+C(1,0)aH[2].To=aH[2].From+C(ay.X/3,0)aH[2].Color=aI;aH[3].Visible=true;aH[3].From=aD;aH[3].To=aH[3].From+C(-ay.X/3,0)aH[3].Color=aI;aH[4].Visible=true;aH[4].From=aD;aH[4].To=aH[4].From+C(0,ay.X/3)aH[4].Color=aI;aH[5].Visible=true;aH[5].From=aE+C(0,1)aH[5].To=aH[5].From+C(0,-ay.X/3)aH[5].Color=aI;aH[6].Visible=true;aH[6].From=aE;aH[6].To=aH[6].From+C(-ay.X/3,0)aH[6].Color=aI;aH[7].Visible=true;aH[7].From=aC+C(0,1)aH[7].To=aH[7].From+C(0,-ay.X/3)aH[7].Color=aI;aH[8].Visible=true;aH[8].From=aC;aH[8].To=aH[8].From+C(ay.X/3,0)aH[8].Color=aI end;do aH[9].Visible=true;aH[9].From=aH[1].From+C(0,-1)aH[9].To=aH[1].To+C(0,1)aH[9].Color=aJ;aH[10].Visible=true;aH[10].From=aH[2].From;aH[10].To=aH[2].To+C(1,0)aH[10].Color=aJ;aH[11].Visible=true;aH[11].From=aH[3].From+C(2,0)aH[11].To=aH[3].To+C(-1,0)aH[11].Color=aJ;aH[12].Visible=true;aH[12].From=aH[4].From;aH[12].To=aH[4].To+C(0,1)aH[12].Color=aJ;aH[13].Visible=true;aH[13].From=aH[5].From;aH[13].To=aH[5].To+C(0,-1)aH[13].Color=aJ;aH[14].Visible=true;aH[14].From=aH[6].From+C(2,0)aH[14].To=aH[6].To+C(-1,0)aH[14].Color=aJ;aH[15].Visible=true;aH[15].From=aH[7].From;aH[15].To=aH[7].To+C(0,-1)aH[15].Color=aJ;aH[16].Visible=true;aH[16].From=aH[8].From+C(-1,0)aH[16].To=aH[8].To+C(1,0)aH[16].Color=aJ end;for a6=1,16 do aH[a6].Transparency=aG end else local aK=ao.BoxInline;local aL=ao.BoxOutline;aK.Size=ay;aK.Position=az;aK.Transparency=aG;aK.Color=L["Box"][3]aK.Visible=true;aL.Size=ay;aL.Position=az;aL.Transparency=aG;aL.Color=L["Box"][4]aL.Visible=true end end;if L["BoxFill"][1]==true then local aM=ao.BoxFill;aM.Size=ay;aM.Position=az;aM.Transparency=(1-L["BoxFill"][3])*as;aM.Color=L["BoxFill"][2]aM.Visible=true end end;do if L["HealthBar"][1]==true then local aN=y(ay.Y*ap.Health/ap.MaxHealth)local c=c:Lerp(ap.Health/ap.MaxHealth,L["HealthBar"][2],L["HealthBar"][3])local aO=az.Y+ay.Y-aN;local aP,aQ,aR=ao.HealthBarInline,ao.HealthBarOutline,ao.HealthBarValue;local aS=aG;aP.Color=c;aP.Size=C(2,aN)aP.Position=C(az.X-5,aO)aP.Visible=true;aP.Transparency=aS;aQ.Size=C(4,ay.Y+2)aQ.Position=C(az.X-6,az.Y-1)aQ.Visible=true;aQ.Transparency=aS;do if L["HealthNumber"][1]==true then local aT=a:ClampString(tostring(w(ap.Health)),ay.Y)local aU=C(az.X+1,az.Y+ay.Y)aR.Text=aT;aR.Color=c;aR.Position=C(aU.X-18,aU.Y-ap.Health/ap.MaxHealth*ay.Y)aR.Visible=true;aR.Transparency=aS end end end end;do if L["Weapon"][1]==true then local aV=ao.Weapon;aV.Text=b:FormatString(a8:FindFirstChild("Character")and a8.Character:FindFirstChildOfClass("Tool")and a8.Character:FindFirstChildOfClass("Tool").Name or"None")aV.Position=az+C(ay.X/2,ay.Y+2)aV.Color=L["Weapon"][2]aV.Transparency=aG;aV.Visible=true end end;do if L["Distance"][1]==true then local aW=ao.Distance;aW.Text="%sm":format(w(au))aW.Position=az+C(ay.X/2,ay.Y+(ao.Weapon.Visible and 15 or 0))aW.Color=L["Distance"][2]aW.Visible=true;aW.Transparency=aG end end;do if L["Flag"][1]==true then local aX=ao.Flag;local aY=""aX.Text=aY;aX.Position=C(ay.X+az.X+3,az.Y-2)aX.Visible=true;aX.Color=L["Flag"][2]aX.Transparency=aG end end;return end end end;return am:Opacity(false)end;return am:Remove()end end;function b:Unload()for a6,aZ in pairs(b.Bases)do aZ:Remove()end end end;a:Connection(e.RenderStepped,function(a_)for a6,aZ in pairs(b.Bases)do a:ThreadFunction(function()aZ:Update()end,"3x01")end end)a:Connection(h.PlayerAdded,function(a8)b:Create({Player=a8})end)for a6,a8 in pairs(h:GetPlayers())do if a8~=i then b:Create({Player=a8})end end;return L
